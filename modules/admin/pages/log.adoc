= Работа с журналом сообщений сервиса Workflow

Журнал сообщений сервиса Workflow предназначен для просмотра данных по обработке функций сервисом.

Файл журнала, как правило, имеет большой объем, а его информация плохо структурирована и неудобна для просмотра.

Для просмотра журнала предназначена утилита _Просмотр журнала Workflow_, которая устанавливается автоматически при установке модуля. Утилиту можно запустить из главного меню Windows последовательным выбором команд menu:Пуск[{dv} > Просмотр журнала Workflow].

[#view]
== Просмотр сообщений журнала

Просматривать журнал сообщений сервиса _Workflow_ удобно через специальную утилиту _Просмотр журнала Workflow_, которая устанавливается автоматически при инсталляции системы.

. Запустите утилиту _Просмотр журнала Workflow_, выбрав в главном меню операционной системы menu:Пуск[{dv} > Просмотр журнала Workflow].
+
Будет открыто окно _Просмотр журнала {dv} Workflow_.
+
[NOTE]
====
При открытии окно _Просмотр журнала {dv} Workflow_ не содержит сведений о сообщениях журнала.
====
+
.Окно "Просмотр журнала {dv} Workflow"
image::wf-logviewer.png[Окно "Просмотр журнала {dv} Workflow"]
+
. Нажмите кнопку *Загрузить*.
+
Будет открыто окно для выбора из файловой системы файла журнала _Workflow_.
. Выберите нужный файл и нажмите кнопку *Открыть*.
+
В окне _Просмотр журнала {dv} Workflow_ отобразятся сообщения выбранного журнала.
+
. Ознакомьтесь с информацией журнала. Она представлена в виде таблицы, в колонках которой отображается следующая информация о сообщениях о проведенных операциях:
+
* _Дата/время_ записи сообщения в инвариантном формате.
* _Тип_ операции.
* _Код_ -- уникальный численный код, связанный с операцией, для которой выводится данное сообщение.
* _Сообщение_ -- текст сообщения об операции.
* _Имя ресурса_, с которым связано сообщение (то есть экземпляра бизнес-процесса, в котором была выполнена операция).
* _Идентификатор ресурса_, с которым связано сообщение (то есть экземпляра бизнес-процесса, в котором была выполнена операция).
* _Продолжительность_ операции.
+
Выведенные на экран данные будут автоматически обновляться по мере появления в журнале сообщений сервиса _Workflow_ новых записей.
+
. При необходимости <<filter,отфильтруйте>> информацию. Просмотрите <<detailed,подробности>> каждой выполненной операции.

[#filter]
== Фильтрация данных журнала

Фильтровать сообщения журнала можно двумя способами: по их типу (уровень журналирования) и коду.

.Чтобы настроить фильтрацию:
. Запустите утилиту просмотра журнала Workflow, выбрав в главном меню операционной системы menu:Пуск[{dv} > Просмотр журнала Workflow].
+
Будет открыто окно _Просмотр журнала {dv} Workflow_.
+
.Окно "Просмотр журнала {dv} Workflow"
image::wf-logviewer.png[Окно "Просмотр журнала {dv} Workflow"]
+
. Настройте фильтрацию сообщений по типу, установив или сняв соответствующие флаги в секции _Отображать типы сообщений по фильтру_:
+
* `*Ошибка*` -- в окне утилиты будет отображаться информация об ошибках.
* `*Предупреждения*` -- в окне утилиты будет отображаться информация о предупреждениях.
* `*Информация*` -- в окне утилиты будет отображаться информация об иных действиях, требующих протоколирования.
* `*Отладочные*` -- в окне утилиты будет отображаться информация об отладочных сообщениях.
* `*Неизвестно*` -- в окне утилиты будет отображаться информация о сообщениях в формате, который не поддерживается утилитой просмотра журнала Workflow.
+
. Настройте фильтрацию сообщений по коду, выполнив следующие действия:
+
* Нажмите кнопку *Фильтр сообщений*, чтобы открыть окно _Фильтрация сообщений_ с деревом кодов сообщений, объединенных в группы.
+
.Окно "Фильтрация сообщений"
image::msg-filter.png[Окно "Фильтрация сообщений"]
+
* Включите/исключите сообщение или группу сообщений в фильтр при помощи флагов напротив нужного названия.
+
. Нажмите кнопку *Применить фильтр*, чтобы вывести отфильтрованные сообщения на экран. При этом будут выведены только сообщения, удовлетворяющие условиям обоих фильтров.

[#showall]
== Вывод на экран всех записей журнала при настроенной фильтрации

.Чтобы вывести на экран все записи журнала, не отменяя при этом настроек фильтра, выполните следующие действия:
. Запустите утилиту просмотра журнала _Workflow_, выбрав в главном меню операционной системы menu:Пуск[{dv} > Просмотр журнала Workflow].
+
Будет открыто окно _Просмотр журнала {dv} Workflow_.
+
.Окно "Просмотр журнала {dv} Workflow"
image::wf-logviewer.png[Окно "Просмотр журнала {dv} Workflow"]
+
. Нажмите кнопку *Прочитать все*.
+
В окне _Просмотр журнала {dv} Workflow_ будут отображены все записи журнала.

[#detailed]
== Просмотр подробной информации о сообщениях журнала

.Чтобы посмотреть подробную информацию о каком-либо сообщении журнала, выполните следующие действия:
. Запустите утилиту просмотра журнала _Workflow_, выбрав в главном меню операционной системы menu:Пуск[{dv} > Просмотр журнала Workflow].
+
Будет открыто окно _Просмотр журнала {dv} Workflow_.
+
image::wf-logviewer.png[Окно "Просмотр журнала {dv} Workflow"]
+
. Дважды щелкните левой кнопкой мыши по строке нужной записи, чтобы открыть окно _Просмотр сообщений_.

.Окно "Просмотр сообщения"
image::logviewr-msg.png[Окно "Просмотр сообщения"]

[#cluster]
== Контроль работы кластера {wf}

.Для контроля работы кластера можно использовать:
Журналы сервисов WorkFlow::
Для каждого сервиса необходимо создать свой журнал.

Журнал событий приложений компьютера::
Журнал событий приложений компьютера, на котором установлен сервер _{dv}_. При старте и остановке сервисов _WorkFlow_ в этом журнале будут появляться сообщения о вхождении сервиса в кластер и назначенном ему диапазоне процессов.
